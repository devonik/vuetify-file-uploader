var VuetifyFileUploader=function(e){"use strict";function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==i)return;var n,r,a=[],l=!0,o=!1;try{for(i=i.call(e);!(l=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);l=!0);}catch(e){o=!0,r=e}finally{try{l||null==i.return||i.return()}finally{if(o)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var n=function(){return{CARD:"card",CARD_LIST:"card-list",AVATAR:"avatar"}},r=function(){return{GRID:"grid"}};function a(e,t,i,n,r,a,l,o,s,d){"boolean"!=typeof l&&(s=o,o=l,l=!1);const u="function"==typeof i?i.options:i;let c;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,r&&(u.functional=!0)),n&&(u._scopeId=n),a?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,s(e)),e&&e._registeredComponents&&e._registeredComponents.add(a)},u._ssrRegister=c):t&&(c=l?function(e){t.call(this,d(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,o(e))}),c)if(u.functional){const e=u.render;u.render=function(t,i){return c.call(i),e(t,i)}}else{const e=u.beforeCreate;u.beforeCreate=e?[].concat(e,c):[c]}return i}var l={name:"DragDropArea",components:{FileInput:a({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("input",{ref:"fileInput",staticClass:"d-none",attrs:{type:"file"},on:{change:function(t){return e.selectFile(t.target.name,t.target.files)}}})},staticRenderFns:[]},undefined,{props:{allowedFileTypes:{type:[String,Array],default:"image/"},manageUpload:{type:Boolean,default:!0},maxSize:{type:[String,Number],default:2048}},name:"FileInput",data:function(){return{isFileInputLoading:!1}},computed:{isLoading:{get:function(){return this.isFileInputLoading},set:function(e){this.isFileInputLoading=e,this.$emit("isLoading",e)}}},methods:{browseFile:function(){this.$refs.fileInput.click()},selectFile:function(e,i){var n=t(i,1)[0],r=!1;if(i.length>0){var a=n.size/1024;"string"==typeof this.allowedFileTypes?r=n.type.indexOf(this.allowedFileTypes)>=0:this.allowedFileTypes.length>0&&(r=this.allowedFileTypes.some((function(e){return n.type.indexOf(e)>=0}))),r?this.maxSize&&a>this.maxSize?this.$emit("errorSize"):this.manageUpload?this.upload(n):this.$emit("upload",n):this.$emit("errorType")}else this.$emit("errorEmpty")},upload:function(e){var t=this;console.log("manage upload",e),this.isLoading=!0;var i=new FileReader;i.onload=function(i){t.$emit("fileLoaded",{title:e.name,type:e.type,imageSrc:i.target.result}),t.isDragging=!1,t.isLoading=!1},i.readAsDataURL(e)}}},"data-v-4f952800",false,undefined,!1,void 0,void 0,void 0),VCardTitle:e.VCardTitle},props:{allowedFileTypes:{type:[String,Array],default:"image/"},maxSize:{type:[String,Number],default:2048}},data:function(){return{isDragDropLoading:!1,isDragging:!1,errors:{fileTypeNotAllowed:!1,fileSizeExceeded:!1,fileEmpty:!1}}},computed:{getClasses:function(){return{isDragging:this.isDragging}},isLoading:{get:function(){return this.isDragDropLoading},set:function(e){this.isDragDropLoading=e,this.$emit("isLoading",e)}}},methods:{dragOver:function(){this.isDragging=!0},dragLeave:function(){this.isDragging=!1},drop:function(e){var t=this;this.resetErrors(),this.isLoading=!0;var i=e.dataTransfer.files,n=!1;if(1===i.length){var r=i[0];console.log("want to drag drop file with size",r.size),console.log("maxSize",this.maxSize);var a=r.size/1024;if("string"==typeof this.allowedFileTypes?n=r.type.indexOf(this.allowedFileTypes)>=0:this.allowedFileTypes.length>0&&(n=this.allowedFileTypes.some((function(e){return r.type.indexOf(e)>=0}))),n)if(this.maxSize&&a>this.maxSize)this.errors.fileSizeExceeded=!0,this.isDragging=!1,this.isLoading=!1;else{var l=new FileReader;l.onload=function(e){t.$emit("fileLoaded",{title:r.name,type:r.type,imageSrc:e.target.result}),t.isDragging=!1,t.isLoading=!1},l.readAsDataURL(r)}else this.errors.fileTypeNotAllowed=!0,this.isDragging=!1,this.isLoading=!1}},onRequestUploadFiles:function(){},resetErrors:function(){this.errors={fileTypeNotAllowed:!1,fileSizeExceeded:!1,fileEmpty:!1}}}};const o="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function s(e){return(e,t)=>function(e,t){const i=o?t.media||"default":e,n=u[i]||(u[i]={ids:new Set,styles:[]});if(!n.ids.has(e)){n.ids.add(e);let i=t.source;if(t.map&&(i+="\n/*# sourceURL="+t.map.sources[0]+" */",i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t.map))))+" */"),n.element||(n.element=document.createElement("style"),n.element.type="text/css",t.media&&n.element.setAttribute("media",t.media),void 0===d&&(d=document.head||document.getElementsByTagName("head")[0]),d.appendChild(n.element)),"styleSheet"in n.element)n.styles.push(i),n.element.styleSheet.cssText=n.styles.filter(Boolean).join("\n");else{const e=n.ids.size-1,t=document.createTextNode(i),r=n.element.childNodes;r[e]&&n.element.removeChild(r[e]),r.length?n.element.insertBefore(t,r[e]):n.element.appendChild(t)}}}(e,t)}let d;const u={};var c=a({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"drop",class:e.getClasses,on:{dragover:function(t){return t.preventDefault(),e.dragOver(t)},dragleave:function(t){return t.preventDefault(),e.dragLeave(t)},drop:function(t){return t.preventDefault(),e.drop(t)},click:function(t){return e.$refs.fileInput.browseFile()}}},[e.errors.fileTypeNotAllowed?i("v-card-title",[e._v("Wrong file type")]):e.errors.fileSizeExceeded?i("v-card-title",[e._v("File size exceeded")]):e.errors.fileSizeExceeded?i("v-card-title",[e._v("No file selected")]):e.isDragging?e._e():i("v-card-title",[e._v("Drop a file or click here")]),e._v(" "),i("FileInput",e._b({ref:"fileInput",on:{isLoading:function(t){return e.$emit("isLoading",t)},fileLoaded:function(t){return e.$emit("fileLoaded",t)},errorType:function(t){e.errors.fileTypeNotAllowed=!0},errorSize:function(t){e.errors.fileSizeExceeded=!0},errorEmpty:function(t){e.errors.fileEmpty=!0}}},"FileInput",e.$props,!1))],1)},staticRenderFns:[]},(function(e){e&&e("data-v-78f4e455_0",{source:".drop[data-v-78f4e455]{cursor:pointer;width:100%;height:100%;background-color:#eee;border:10px solid #eee;display:flex;align-items:center;justify-content:center;padding:1rem;transition:background-color .2s ease-in-out;font-family:sans-serif}.isDragging[data-v-78f4e455]{background-color:#999;border-color:#fff}",map:void 0,media:void 0})}),l,"data-v-78f4e455",false,undefined,!1,s,void 0,void 0),f=a({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-avatar",{attrs:{color:e.color,"min-width":e.minWidth,"min-height":e.minHeight}},[e.internalFile?i("v-img",{staticClass:"align-end",attrs:{"min-width":e.minWidth,"min-height":e.minHeight,src:e.internalFile.imageSrc,"lazy-src":e.internalFile.imageLazySrc?e.internalFile.imageLazySrc:e.defaultImageLazySrc,gradient:"to bottom, rgba(0,0,0,.1), rgba(0,0,0,.5)",alt:e.imageAlt,contain:e.contain},scopedSlots:e._u([{key:"placeholder",fn:function(){return[i("v-card-title",[e._v("No preview available")])]},proxy:!0}],null,!1,1656814713)}):i("DragDropArea",e._b({on:{fileLoaded:e.addFile,isLoading:function(t){return e.isLoading=t}}},"DragDropArea",e.$props,!1))],1)},staticRenderFns:[]},undefined,{name:"AvatarUploader",components:{DragDropArea:c,VCardTitle:e.VCardTitle,VImg:e.VImg,VAvatar:e.VAvatar},props:{file:{type:Object,default:null},minWidth:{type:[String,Number],default:265},minHeight:{type:[String,Number],default:265},color:{type:String,default:"grey"},contain:{type:Boolean,default:!1},allowedFileTypes:{type:[String,Array],default:"image/"},maxSize:{type:[String,Number],default:2048},imageAlt:{type:String,default:"Picture could not be load"}},data:function(){return{isLoading:!1,internalFile:null,defaultImageLazySrc:"https://picsum.photos/id/11/10/6"}},watch:{file:function(e,t){console.log("item oldVal, newVal",e,t),e!==t&&(this.internalFile=Object.assign(this.file))}},mounted:function(){this.file&&(this.internalFile=Object.assign(this.file))},computed:{isImgReady:function(){return this.file&&(null===this.file.type||this.file.type.indexOf("image/")>=0)}},methods:{addFile:function(e){var t=e.title,i=e.type,n=e.imageSrc;console.log("drop done",t,i,n),this.internalFile={title:t,type:i,imageSrc:n},this.$emit("addFile",{title:t,type:i,imageSrc:n})}}},"data-v-91620456",false,undefined,!1,void 0,void 0,void 0),p=a({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-card",{staticClass:"flex d-flex flex-column",scopedSlots:e._u([{key:"footer",fn:function(){},proxy:!0}])},[e.isLoading?i("v-progress-circular",{staticClass:"d-flex flex align-self-center justify-center",attrs:{indeterminate:""}}):e._e(),e._v(" "),i("DragDropArea",e._b({directives:[{name:"show",rawName:"v-show",value:!e.isLoading,expression:"!isLoading"}],on:{fileLoaded:function(t){return e.$emit("addFile",t)},isLoading:function(t){return e.isLoading=t}}},"DragDropArea",e.$props,!1))],1)},staticRenderFns:[]},undefined,{name:"FileCardPlaceholder",components:{DragDropArea:c,VProgressCircular:e.VProgressCircular,VCard:e.VCard},props:{allowedFileTypes:{type:[String,Array],default:"image/"},maxSize:{type:[String,Number],default:2048}},data:function(){return{isLoading:!1}}},"data-v-1f108d68",false,undefined,!1,void 0,void 0,void 0),g=a({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-card",{scopedSlots:e._u([{key:"footer",fn:function(){},proxy:!0}])},[e.internalFile?i("v-img",{staticClass:"align-end",attrs:{src:e.internalFile.imageSrc,"lazy-src":e.internalFile.imageLazySrc?e.internalFile.imageLazySrc:e.defaultImageLazySrc,gradient:"to bottom, rgba(0,0,0,.1), rgba(0,0,0,.5)",height:e.imageHeight,alt:e.internalFile.imageAlt,contain:e.contain},scopedSlots:e._u([{key:"placeholder",fn:function(){return[i("v-card-title",[e._v("No preview available")])]},proxy:!0}],null,!1,1656814713)},[e._v(" "),i("v-card-title",{staticClass:"white--text",domProps:{textContent:e._s(e.internalFile.title)}}),e._v(" "),i("v-card-subtitle",{staticClass:"white--text",domProps:{textContent:e._s(e.internalFile.type)}})],1):e.showPlaceholder?i("FileCardPlaceholder",e._b({attrs:{"image-height":e.imageHeight},on:{addFile:e.addFile}},"FileCardPlaceholder",e.$props,!1)):e._e()],1)},staticRenderFns:[]},undefined,{name:"FileCard",components:{FileCardPlaceholder:p,VCardTitle:e.VCardTitle,VCardSubtitle:e.VCardSubtitle,VImg:e.VImg,VCard:e.VCard},props:{file:{type:Object,default:null},showPlaceholder:{type:Boolean,default:!0},imageHeight:{type:[String,Number],default:200},imageAlt:{type:String,default:"Picture could not be load"},contain:{type:Boolean,default:!1}},data:function(){return{defaultImageLazySrc:"https://picsum.photos/id/11/10/6",internalFile:null}},watch:{file:function(e,t){console.log("item oldVal, newVal",e,t),e!==t&&(this.internalFile=Object.assign(this.file))}},mounted:function(){this.file&&(this.internalFile=Object.assign(this.file))},methods:{addFile:function(e){var t=e.title,i=e.type,n=e.imageSrc;this.internalFile={title:t,type:i,imageSrc:n},this.$emit("addFile",{title:t,type:i,imageSrc:n})}}},"data-v-17be91da",false,undefined,!1,void 0,void 0,void 0),m=a({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"file-uploader"},[e.layout===e.layouts.CARD?i("FileCard",e._b({on:{addFile:function(t){return e.$emit("addFile",t)}}},"FileCard",e.$props,!1)):e._e(),e._v(" "),e.layout===e.layouts.CARD_LIST?i("FileCardList",e._b({on:{addFile:function(t){return e.$emit("addFile",t)}}},"FileCardList",e.$props,!1)):e.layout===e.layouts.AVATAR?i("AvatarUploader",e._b({on:{addFile:function(t){return e.$emit("addFile",t)}}},"AvatarUploader",e.$props,!1)):e._e()],1)},staticRenderFns:[]},undefined,{name:"FileUploader",components:{FileCard:g,FileCardList:a({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"file-uploader-card-list"},[e.listLayout===e.listLayouts.GRID?[i("v-row",[e._l(e.files,(function(t){return i("v-col",{key:t.title,attrs:{cols:"12",sm:e.gridCols}},[i("FileCard",{attrs:{file:t,contain:e.contain,"image-height":e.imageHeight}})],1)})),e._v(" "),e.showPlaceholder?i("v-col",{staticClass:"d-flex flex-column"},[i("FileCardPlaceholder",e._b({attrs:{"image-height":e.imageHeight},on:{addFile:e.addFile}},"FileCardPlaceholder",e.$props,!1))],1):e._e()],2)]:e._e()],2)},staticRenderFns:[]},undefined,{name:"FileCardList",components:{FileCard:g,FileCardPlaceholder:p,VCol:e.VCol,VRow:e.VRow},props:{listLayout:{type:String,default:"grid"},files:{type:Array,default:function(){return[]}},gridCols:{type:[String,Number],default:6},showPlaceholder:{type:Boolean,default:!0},imageHeight:{type:[String,Number],default:200},allowedFileTypes:{type:[String,Array],default:"image/"},maxSize:{type:[String,Number],default:2048},contain:{type:Boolean,default:!1}},computed:{listLayouts:function(){return r()}},watch:{internalFiles:function(e,t){console.log("item oldVal, newVal",e,t),e!==t&&(this.internalFiles=Object.assign(this.files))}},mounted:function(){this.files&&(this.internalFiles=Object.assign(this.files))},data:function(){return{internalFiles:[]}},methods:{addFile:function(e){var t=e.title,i=e.type,n=e.imageSrc;console.log("addFile",{title:t,type:i,imageSrc:n}),this.files.push({title:t,type:i,imageSrc:n}),this.$emit("addFile",{title:t,type:i,imageSrc:n})}}},"data-v-db66a788",false,undefined,!1,void 0,void 0,void 0),AvatarUploader:f},props:{files:{type:Array,default:null},file:{type:Object,default:null},layout:{type:String,default:"card"},allowedFileTypes:{type:[String,Array],default:"image/"},maxSize:{type:[String,Number],default:2048},contain:{type:Boolean,default:!1},imageAlt:{type:String,default:"Picture could not be load"},listLayout:{type:[String],default:"grid"},gridCols:{type:[String,Number],default:6},showPlaceholder:{type:Boolean,default:!0},imageHeight:{type:[String,Number],default:200},minWidth:{type:[String,Number],default:265},minHeight:{type:[String,Number],default:265},color:{type:String,default:"grey"}},data:function(){return{}},computed:{layouts:function(){return n()}},methods:{}},"data-v-3e14dc30",false,undefined,!1,void 0,void 0,void 0),h=Object.freeze({__proto__:null,FileUploader:m}),y=function(e){Object.entries(h).forEach((function(i){var n=t(i,2),r=n[0],a=n[1];e.component(r,a)}))},v=Object.freeze({__proto__:null,default:y,FileUploader:m});return Object.entries(v).forEach((function(e){var i=t(e,2),n=i[0],r=i[1];"default"!==n&&(y[n]=r)})),y}(Vuetify);